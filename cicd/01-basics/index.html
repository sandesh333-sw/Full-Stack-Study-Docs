<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CI/CD Basics - Web Development Learning Hub</title>
    <link rel="stylesheet" href="../../styles/learning.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
</head>
<body>
    <nav class="nav">
        <div class="nav-container">
            <a href="../../index.html" class="nav-logo">üíª WebDev Hub</a>
            <div class="nav-links">
                <a href="../../nodejs/01-basics/">Node.js</a>
                <a href="../../react/01-basics/">React.js</a>
                <a href="../01-basics/">CI/CD</a>
                <a href="../../kubernetes/01-basics/">Kubernetes</a>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <header class="page-header">
            <div class="container">
                <h1>CI/CD Basics üîÑ</h1>
                <p>Automate your development workflow with GitHub Actions</p>
                <div class="breadcrumb">
                    <a href="../../index.html">Home</a> ‚Üí <span>CI/CD Basics</span>
                </div>
            </div>
        </header>

        <div class="container">
            <div class="learning-layout">
                <aside class="sidebar">
                    <nav class="topic-nav">
                        <h3>Topics</h3>
                        <ul>
                            <li><a href="#what-is-cicd">What is CI/CD?</a></li>
                            <li><a href="#github-actions">GitHub Actions</a></li>
                            <li><a href="#workflow-basics">Workflow Basics</a></li>
                            <li><a href="#first-workflow">First Workflow</a></li>
                            <li><a href="#testing-automation">Testing Automation</a></li>
                            <li><a href="#deployment">Deployment</a></li>
                            <li><a href="#environment-variables">Environment Variables</a></li>
                            <li><a href="#common-actions">Common Actions</a></li>
                            <li><a href="#best-practices">Best Practices</a></li>
                        </ul>
                    </nav>
                </aside>

                <div class="content">
                    <!-- What is CI/CD -->
                    <section id="what-is-cicd" class="topic-section">
                        <h2>What is CI/CD? üîÑ</h2>
                        <div class="explanation">
                            <p><strong>CI/CD</strong> stands for Continuous Integration and Continuous Deployment. It's a set of practices that automate the integration, testing, and deployment of code changes.</p>
                            
                            <div class="key-points">
                                <h4>Key Concepts:</h4>
                                <ul>
                                    <li><strong>Continuous Integration (CI):</strong> Automatically test code when changes are made</li>
                                    <li><strong>Continuous Deployment (CD):</strong> Automatically deploy tested code to production</li>
                                    <li><strong>Automation:</strong> Reduce manual errors and speed up delivery</li>
                                    <li><strong>Quality Assurance:</strong> Catch bugs early in development</li>
                                    <li><strong>Fast Feedback:</strong> Know immediately if something breaks</li>
                                </ul>
                            </div>
                        </div>

                        <div class="explanation-grid">
                            <div class="explanation-item">
                                <h4>Continuous Integration</h4>
                                <p>Developers merge code frequently, automated tests run on each commit</p>
                            </div>
                            <div class="explanation-item">
                                <h4>Continuous Deployment</h4>
                                <p>Automatically deploy code that passes all tests to production</p>
                            </div>
                            <div class="explanation-item">
                                <h4>Benefits</h4>
                                <p>Faster delivery, fewer bugs, better collaboration, reduced risk</p>
                            </div>
                            <div class="explanation-item">
                                <h4>Tools</h4>
                                <p>GitHub Actions, Jenkins, GitLab CI, CircleCI, Travis CI</p>
                            </div>
                        </div>

                        <div class="code-example">
                            <h4>CI/CD Pipeline Flow:</h4>
                            <pre><code class="language-bash"># Traditional Development (Manual)
1. Write code
2. Manually test locally
3. Manually deploy to staging
4. Manually test on staging
5. Manually deploy to production
6. Hope nothing breaks! üòÖ

# CI/CD Pipeline (Automated)
1. Write code
2. Push to repository
3. ü§ñ Automated tests run
4. ü§ñ If tests pass, deploy to staging
5. ü§ñ Run integration tests
6. ü§ñ If all tests pass, deploy to production
7. ü§ñ Monitor and alert if issues</code></pre>
                        </div>
                    </section>

                    <!-- GitHub Actions -->
                    <section id="github-actions" class="topic-section">
                        <h2>GitHub Actions üöÄ</h2>
                        <div class="explanation">
                            <p>GitHub Actions is GitHub's built-in CI/CD platform. It allows you to automate workflows directly in your GitHub repository.</p>
                        </div>

                        <div class="explanation-grid">
                            <div class="explanation-item">
                                <h4>Workflows</h4>
                                <p>Automated processes defined in YAML files</p>
                            </div>
                            <div class="explanation-item">
                                <h4>Actions</h4>
                                <p>Reusable units of code that perform specific tasks</p>
                            </div>
                            <div class="explanation-item">
                                <h4>Runners</h4>
                                <p>Servers that execute your workflows (GitHub-hosted or self-hosted)</p>
                            </div>
                            <div class="explanation-item">
                                <h4>Events</h4>
                                <p>Triggers that start workflows (push, pull request, schedule)</p>
                            </div>
                        </div>

                        <div class="code-example">
                            <h4>Key Components:</h4>
                            <pre><code class="language-yaml"># .github/workflows/example.yml
name: Example Workflow                    # Workflow name

on:                                      # Events that trigger workflow
  push:                                  # Trigger on push
    branches: [ main ]                   # Only on main branch
  pull_request:                          # Trigger on PR
    branches: [ main ]

jobs:                                    # Jobs to run
  test:                                  # Job name
    runs-on: ubuntu-latest               # Runner environment
    
    steps:                               # Steps in the job
      - uses: actions/checkout@v3        # Pre-built action
      - name: Setup Node.js              # Custom step name
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - name: Install dependencies       # Custom step
        run: npm install                 # Shell command
      
      - name: Run tests
        run: npm test</code></pre>
                        </div>

                        <div class="tip-box">
                            <h4>üéØ Why GitHub Actions?</h4>
                            <ul>
                                <li>Free for public repositories</li>
                                <li>Integrated with GitHub</li>
                                <li>Thousands of pre-built actions</li>
                                <li>Support for any language/platform</li>
                                <li>Matrix builds for multiple environments</li>
                            </ul>
                        </div>
                    </section>

                    <!-- Workflow Basics -->
                    <section id="workflow-basics" class="topic-section">
                        <h2>Workflow Basics üìù</h2>
                        <div class="explanation">
                            <p>Workflows are defined in YAML files stored in the <code>.github/workflows</code> directory of your repository.</p>
                        </div>

                        <div class="code-example">
                            <h4>Basic Workflow Structure:</h4>
                            <pre><code class="language-yaml"># .github/workflows/basic.yml
name: Basic Workflow

# When to run this workflow
on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

# Environment variables (optional)
env:
  NODE_VERSION: '18'

# Jobs to execute
jobs:
  # Job 1: Build and Test
  build-and-test:
    name: Build and Test Application
    runs-on: ubuntu-latest
    
    # Environment variables for this job
    env:
      CI: true
    
    # Steps to execute
    steps:
      # Step 1: Get the code
      - name: Checkout code
        uses: actions/checkout@v3
      
      # Step 2: Setup Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'npm'
      
      # Step 3: Install dependencies
      - name: Install dependencies
        run: npm ci
      
      # Step 4: Run linting
      - name: Run linter
        run: npm run lint
      
      # Step 5: Run tests
      - name: Run tests
        run: npm test
      
      # Step 6: Build application
      - name: Build application
        run: npm run build</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Common Triggers:</h4>
                            <pre><code class="language-yaml"># Different trigger examples

# 1. On push to specific branches
on:
  push:
    branches: [ main, develop ]
    paths: [ 'src/**', 'package.json' ]  # Only when these files change

# 2. On pull requests
on:
  pull_request:
    branches: [ main ]
    types: [ opened, synchronize, reopened ]

# 3. On schedule (cron syntax)
on:
  schedule:
    - cron: '0 0 * * *'  # Daily at midnight

# 4. Manual trigger
on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Environment to deploy to'
        required: true
        default: 'staging'

# 5. Multiple triggers
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  schedule:
    - cron: '0 2 * * 1'  # Weekly on Monday 2 AM</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Different Operating Systems:</h4>
                            <pre><code class="language-yaml"># Matrix strategy - test on multiple OS and Node versions
jobs:
  test:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
        node-version: [16, 18, 20]
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node-version }}
      
      - name: Install and test
        run: |
          npm ci
          npm test</code></pre>
                        </div>
                    </section>

                    <!-- First Workflow -->
                    <section id="first-workflow" class="topic-section">
                        <h2>Your First Workflow üéâ</h2>
                        <div class="explanation">
                            <p>Let's create a simple workflow for a Node.js project that runs tests on every push and pull request.</p>
                        </div>

                        <div class="code-example">
                            <h4>Step 1: Create Workflow File</h4>
                            <pre><code class="language-bash"># In your project root, create the directories
mkdir -p .github/workflows

# Create the workflow file
touch .github/workflows/ci.yml</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Step 2: Define the Workflow</h4>
                            <pre><code class="language-yaml"># .github/workflows/ci.yml
name: CI Pipeline

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    name: Test Application
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install Dependencies
        run: npm ci
      
      - name: Run Tests
        run: npm test
      
      - name: Upload Test Results
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: test-results
          path: coverage/</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Step 3: Add Package.json Scripts</h4>
                            <pre><code class="language-json">{
  "name": "my-project",
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "lint": "eslint src/",
    "lint:fix": "eslint src/ --fix",
    "build": "webpack --mode production"
  },
  "devDependencies": {
    "jest": "^29.0.0",
    "eslint": "^8.0.0"
  }
}</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Step 4: Commit and Push</h4>
                            <pre><code class="language-bash"># Add the workflow file
git add .github/workflows/ci.yml

# Commit the changes
git commit -m "Add CI workflow"

# Push to trigger the workflow
git push origin main

# Check the workflow in GitHub:
# Go to your repository ‚Üí Actions tab</code></pre>
                        </div>

                        <div class="live-example">
                            <h4>Workflow Status:</h4>
                            <div class="demo-box">
                                <div style="background: #e8f5e8; border: 1px solid #4caf50; padding: 15px; border-radius: 5px; margin-bottom: 10px;">
                                    <strong>‚úÖ CI Pipeline - Success</strong><br>
                                    <small>All tests passed ‚Ä¢ Build successful ‚Ä¢ 2m 34s</small>
                                </div>
                                <div style="background: #fff3e0; border: 1px solid #ff9800; padding: 15px; border-radius: 5px; margin-bottom: 10px;">
                                    <strong>üü° CI Pipeline - In Progress</strong><br>
                                    <small>Running tests... ‚Ä¢ 1m 15s elapsed</small>
                                </div>
                                <div style="background: #ffebee; border: 1px solid #f44336; padding: 15px; border-radius: 5px;">
                                    <strong>‚ùå CI Pipeline - Failed</strong><br>
                                    <small>Test suite failed ‚Ä¢ Check logs for details ‚Ä¢ 1m 42s</small>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Testing Automation -->
                    <section id="testing-automation" class="topic-section">
                        <h2>Testing Automation üß™</h2>
                        <div class="explanation">
                            <p>Automated testing is a crucial part of CI/CD. Let's set up comprehensive testing workflows.</p>
                        </div>

                        <div class="code-example">
                            <h4>Advanced Testing Workflow:</h4>
                            <pre><code class="language-yaml"># .github/workflows/test.yml
name: Test Suite

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  lint:
    name: Code Linting
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run ESLint
        run: npm run lint
      
      - name: Run Prettier
        run: npm run format:check

  unit-tests:
    name: Unit Tests
    runs-on: ubuntu-latest
    needs: lint  # Wait for linting to pass
    
    strategy:
      matrix:
        node-version: [16, 18, 20]
    
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node-version }}
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run unit tests
        run: npm run test:unit
      
      - name: Generate coverage report
        run: npm run test:coverage
      
      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage/lcov.info

  integration-tests:
    name: Integration Tests
    runs-on: ubuntu-latest
    needs: unit-tests
    
    services:
      postgres:
        image: postgres:13
        env:
          POSTGRES_PASSWORD: postgres
          POSTGRES_DB: test_db
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 5432:5432
    
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run migrations
        run: npm run db:migrate
        env:
          DATABASE_URL: postgres://postgres:postgres@localhost:5432/test_db
      
      - name: Run integration tests
        run: npm run test:integration
        env:
          DATABASE_URL: postgres://postgres:postgres@localhost:5432/test_db</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Browser Testing with Playwright:</h4>
                            <pre><code class="language-yaml"># .github/workflows/e2e.yml
name: E2E Tests

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  e2e-tests:
    name: End-to-End Tests
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Install Playwright browsers
        run: npx playwright install --with-deps
      
      - name: Build application
        run: npm run build
      
      - name: Start application
        run: npm start &
        env:
          NODE_ENV: test
      
      - name: Wait for application
        run: npx wait-on http://localhost:3000
      
      - name: Run Playwright tests
        run: npx playwright test
      
      - name: Upload test results
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: playwright-report
          path: playwright-report/</code></pre>
                        </div>
                    </section>

                    <!-- Deployment -->
                    <section id="deployment" class="topic-section">
                        <h2>Automated Deployment üöÄ</h2>
                        <div class="explanation">
                            <p>Once tests pass, automatically deploy your application to staging and production environments.</p>
                        </div>

                        <div class="code-example">
                            <h4>Deploy to Vercel:</h4>
                            <pre><code class="language-yaml"># .github/workflows/deploy.yml
name: Deploy to Vercel

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build project
        run: npm run build
      
      - name: Deploy to Vercel
        uses: vercel/action@v1
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: '--prod'</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Deploy to Netlify:</h4>
                            <pre><code class="language-yaml"># .github/workflows/netlify.yml
name: Deploy to Netlify

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install and build
        run: |
          npm ci
          npm run build
      
      - name: Deploy to Netlify
        uses: netlify/actions/cli@master
        with:
          args: deploy --prod --dir=dist
        env:
          NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Multi-Environment Deployment:</h4>
                            <pre><code class="language-yaml"># .github/workflows/multi-env.yml
name: Multi-Environment Deploy

on:
  push:
    branches: [ main, develop ]

jobs:
  deploy-staging:
    if: github.ref == 'refs/heads/develop'
    runs-on: ubuntu-latest
    environment: staging
    
    steps:
      - uses: actions/checkout@v3
      - name: Deploy to Staging
        run: |
          echo "Deploying to staging environment"
          # Your staging deployment commands
        env:
          ENVIRONMENT: staging
          API_URL: ${{ secrets.STAGING_API_URL }}

  deploy-production:
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    environment: production
    needs: [test]  # Ensure tests pass first
    
    steps:
      - uses: actions/checkout@v3
      - name: Deploy to Production
        run: |
          echo "Deploying to production environment"
          # Your production deployment commands
        env:
          ENVIRONMENT: production
          API_URL: ${{ secrets.PROD_API_URL }}</code></pre>
                        </div>
                    </section>

                    <div class="lesson-nav">
                        <a href="../../react/01-basics/index.html" class="nav-btn prev">‚Üê React Basics</a>
                        <a href="../02-intermediate/index.html" class="nav-btn next">Intermediate CI/CD ‚Üí</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Web Development Learning Hub. Automate everything! üîÑ</p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="../../scripts/learning.js"></script>
</body>
</html>
